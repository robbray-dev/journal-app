<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My Journal - Forgot Password</title>
    <style>
      :root {
        --bg: #fafafa;
        --text: #111827;
        --text-strong: #000000;
        --muted: #6b7280;
        --muted-light: #9ca3af;
        --line: #e5e7eb;
        --soft: #f3f4f6;
        --card: #ffffff;

        --accent: #10b981;
        --accent-hover: #059669;
        --accent-light: rgba(16, 185, 129, 0.08);
        --accent-border: rgba(16, 185, 129, 0.2);

        --error: #ef4444;
        --error-light: rgba(239, 68, 68, 0.1);

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.12);

        --radius-sm: 8px;
        --radius-md: 12px;
        --radius-lg: 16px;
        --radius-xl: 20px;

        --font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;

        --spacing-unit: 8px;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        margin: 0;
      }

      body {
        font-family: var(--font);
        background: var(--bg);
        color: var(--text);
        font-size: 15px;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: calc(var(--spacing-unit) * 3);
      }

      .auth-container {
        width: 100%;
        max-width: 420px;
      }

      .auth-header {
        text-align: center;
        margin-bottom: calc(var(--spacing-unit) * 4);
      }

      .auth-title {
        font-size: 28px;
        font-weight: 700;
        color: var(--text-strong);
        margin: 0 0 calc(var(--spacing-unit) * 1);
        letter-spacing: -0.5px;
      }

      .auth-subtitle {
        font-size: 15px;
        color: var(--muted);
        margin: 0;
      }

      .auth-card {
        background: var(--card);
        border-radius: var(--radius-xl);
        border: 1px solid var(--line);
        box-shadow: var(--shadow-lg);
        padding: calc(var(--spacing-unit) * 4);
      }

      .form-group {
        margin-bottom: calc(var(--spacing-unit) * 2.5);
      }

      .form-label {
        display: block;
        font-size: 14px;
        font-weight: 600;
        color: var(--text-strong);
        margin-bottom: calc(var(--spacing-unit) * 1);
      }

      .form-input {
        width: 100%;
        height: 48px;
        padding: 0 calc(var(--spacing-unit) * 2);
        border: 1px solid var(--line);
        border-radius: var(--radius-md);
        background: var(--bg);
        font-size: 15px;
        color: var(--text);
        font-family: var(--font);
        transition: all 0.2s ease;
        outline: none;
      }

      .form-input:hover {
        border-color: var(--muted-light);
      }

      .form-input:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 3px var(--accent-light);
        background: var(--card);
      }

      .form-input::placeholder {
        color: var(--muted-light);
      }

      .form-input.error {
        border-color: var(--error);
      }

      .form-input.error:focus {
        box-shadow: 0 0 0 3px var(--error-light);
      }

      .error-message {
        display: none;
        margin-top: calc(var(--spacing-unit) * 1);
        font-size: 13px;
        color: var(--error);
      }

      .error-message.show {
        display: block;
      }

      .submit-btn {
        width: 100%;
        height: 48px;
        border: none;
        border-radius: var(--radius-md);
        background: var(--accent);
        color: white;
        font-size: 15px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        margin-top: calc(var(--spacing-unit) * 1);
      }

      .submit-btn:hover {
        background: var(--accent-hover);
        transform: translateY(-1px);
        box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
      }

      .submit-btn:active {
        transform: translateY(0);
      }

      .submit-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .success-message {
        padding: calc(var(--spacing-unit) * 2);
        background: var(--accent-light);
        border: 1px solid var(--accent-border);
        border-radius: var(--radius-md);
        color: var(--accent-hover);
        font-size: 14px;
        margin-bottom: calc(var(--spacing-unit) * 2);
        display: none;
      }

      .success-message.show {
        display: block;
      }

      .back-to-login {
        margin-top: calc(var(--spacing-unit) * 3);
        text-align: center;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: calc(var(--spacing-unit) * 1);
        font-size: 14px;
        color: var(--muted);
        text-decoration: none;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .back-link:hover {
        color: var(--accent);
      }

      .back-link svg {
        transition: transform 0.2s ease;
      }

      .back-link:hover svg {
        transform: translateX(-2px);
      }

      .auth-footer {
        text-align: center;
        margin-top: calc(var(--spacing-unit) * 3);
        font-size: 14px;
        color: var(--muted);
      }

      .auth-footer a {
        color: var(--accent);
        text-decoration: none;
        font-weight: 600;
      }

      .auth-footer a:hover {
        text-decoration: underline;
      }

      @media (max-width: 480px) {
        body {
          padding: calc(var(--spacing-unit) * 2);
        }

        .auth-card {
          padding: calc(var(--spacing-unit) * 3);
        }

        .auth-title {
          font-size: 24px;
        }
      }
    </style>
  </head>

  <body>
    <div class="auth-container">
      <div class="auth-header">
        <h1 class="auth-title">Forgot Password?</h1>
        <p class="auth-subtitle">
          No worries, we'll send you reset instructions
        </p>
      </div>

      <div class="auth-card">
        <div class="success-message" id="successMessage"></div>

        <form id="forgotPasswordForm">
          <div class="form-group">
            <label class="form-label" for="reset-email">Email</label>
            <input
              type="email"
              id="reset-email"
              class="form-input"
              placeholder="Email"
              required
            />
            <div class="error-message" id="reset-email-error"></div>
          </div>

          <button type="submit" class="submit-btn" id="resetBtn">
            Send Reset Link
          </button>
        </form>

        <div class="back-to-login">
          <a href="auth.html" class="back-link">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="m15 18-6-6 6-6" />
            </svg>
            Back to Sign In
          </a>
        </div>
      </div>

      <div class="auth-footer">
        Remember your password? <a href="auth.html">Sign in</a>
      </div>
    </div>

    <script>
      // Forgot password form submission
      const forgotPasswordForm = document.getElementById("forgotPasswordForm");
      const resetBtn = document.getElementById("resetBtn");

      if (forgotPasswordForm) {
        forgotPasswordForm.addEventListener("submit", async (e) => {
          e.preventDefault();

          const email = document.getElementById("reset-email").value;

          // Clear previous errors
          clearErrors();

          // Disable button during submission
          resetBtn.disabled = true;
          resetBtn.textContent = "Sending...";

          try {
            // TODO: Add your Supabase password reset logic here
            // const { data, error } = await supabase.auth.resetPasswordForEmail(email, {
            //   redirectTo: `${window.location.origin}/reset-password.html`,
            // });

            // if (error) throw error;

            // For demo purposes:
            console.log("Password reset requested for:", email);

            // Show success message
            showSuccess("Check your email! We sent you a password reset link.");

            // Clear the form
            forgotPasswordForm.reset();
          } catch (error) {
            showError(
              "reset-email",
              error.message || "Failed to send reset link. Please try again."
            );
          } finally {
            // Re-enable button
            resetBtn.disabled = false;
            resetBtn.textContent = "Send Reset Link";
          }
        });
      }

      // Helper functions
      function showError(fieldId, message) {
        const input = document.getElementById(fieldId);
        const errorDiv = document.getElementById(`${fieldId}-error`);

        if (input && errorDiv) {
          input.classList.add("error");
          errorDiv.textContent = message;
          errorDiv.classList.add("show");
        }
      }

      function clearErrors() {
        const inputs = document.querySelectorAll(".form-input");
        const errors = document.querySelectorAll(".error-message");

        inputs.forEach((input) => input.classList.remove("error"));
        errors.forEach((error) => {
          error.classList.remove("show");
          error.textContent = "";
        });
      }

      function showSuccess(message) {
        const successDiv = document.getElementById("successMessage");
        if (successDiv) {
          successDiv.textContent = message;
          successDiv.classList.add("show");
        }
      }
    </script>
  </body>
</html>
